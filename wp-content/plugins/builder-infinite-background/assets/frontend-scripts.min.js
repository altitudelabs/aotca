(function(d,c,a,e){var b={init:function(){var f=b;f.bindEvents()},bindEvents:function(){var f=b;d(a).on("tfb.live_styling.after_create",f.bindLiveStyling).on("tb:row:create",function(i,h,g){var j=g.find(".themify_builder_infinite_bg");if(j.length){h.find(".row_inner").prepend(j)}})},removeInfiniteBg:function(g){var h=ThemifyBuilderCommon.getComponentType(g);var f=null;if(h==="row"){f=g.find(".row_inner").first().children(".themify_builder_infinite_bg")}f.remove()},bindLiveStyling:function(l,f){var g,k,h,j,i;g=b;k=function(n){var m=f.$liveStyledElmt;return d.post(themifyBuilder.ajaxurl,{nonce:themifyBuilder.tfb_load_nonce,action:"tfb_infinite_bg_live_styling",tfb_infinite_background_data:d.extend({},n,{row_order:m.attr("data-cid"),builder_id:m.attr("data-cid")})})};h=function(){return{type:d('input[name="row_scrolling_background"]:checked').val(),width:d("#row_scrolling_background_width").val(),height:d("#row_scrolling_background_height").val(),speed:d("#row_scrolling_background_speed").val()}};j=function(n){var m=f.$liveStyledElmt;if(m){var o=ThemifyBuilderCommon.getComponentType(m);if(o==="row"){m.find(".row_inner").prepend(n)}}};i=function(){var m=h();if(m.type==="disable"){return false}if(m.type==="bg-scroll-horizontally"&&!m.width.length){return false}if(m.type==="bg-scroll-vertically"&&!m.height.length){return false}return true};f.$context.on("change",'input[name="row_scrolling_background"],#row_scrolling_background_speed,#row_scrolling_background_width,#row_scrolling_background_height',function(){g.removeInfiniteBg(f.$liveStyledElmt);if(!i()){return}k(h()).done(function(n){if(n.length<10){return}var m=d(n);j(m)})})}};b.init()}(jQuery,window,document));