var do_maps;(function(f,e){var h=null;function i(g){return g.match(/^([-+]?[1-8]?\d(\.\d+)?|90(\.0+)?),?\s*([-+]?180(\.0+)?|[-+]?((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/)}function b(j,k){if(j==null||j.trim()==""){return false}var g=i(j);if(f.isArray(g)){k(new google.maps.LatLng(g[1],g[4]))}else{h.geocode({address:j},function(m,l){if(l==google.maps.GeocoderStatus.OK){k(m[0].geometry.location)}return null})}}function d(g,l,k,j){b(g,function(m){var n=new google.maps.Marker({map:j,position:m,icon:k});if(l.trim()!=""){var o=new google.maps.InfoWindow({content:'<div class="maps-pro-content">'+l+"</div>"});google.maps.event.addListener(n,"click",function(){o.open(j,n)})}})}c=function c(g){h=new google.maps.Geocoder();f(".module.module-maps-pro").each(function(){if(f(this).find(".maps-pro-canvas").length<1){return}var o=f(this),k=o.data("config"),j={};j.zoom=parseInt(k.zoom);j.center=new google.maps.LatLng(-34.397,150.644);j.mapTypeId=google.maps.MapTypeId[k.type];j.scrollwheel=k.scrollwheel=="enable";j.draggable=k.draggable=="enable";j.disableDefaultUI=k.disable_map_ui=="yes";if(typeof map_pro_styles!="undefined"&&k.style_map!=""){j.styles=map_pro_styles[k.style_map]}if(typeof builderMapsPro!="undefined"&&builderMapsPro.styles){j.styles=builderMapsPro.styles[k.style_map]}var m=o.find(".maps-pro-canvas");var n=new google.maps.Map(m[0],j);google.maps.event.addListenerOnce(n,"idle",function(){f("body").trigger("builder_maps_pro_loaded",[o,n])});m.data("gmap_object",n);b(k.address,function(q){n.setCenter(q)});o.find(".maps-pro-marker").each(function(){var q=f(this);if(i(q.data("address"))){d(q.data("address"),q.html(),q.data("image"),n);q.remove()}});var p=o.find(".maps-pro-marker");function l(r){var q=f(p[r]);d(q.data("address"),q.html(),q.data("image"),n);if(r<p.length){setTimeout(function(){r++;l(r)},350)}}l(0)})};function a(){if(typeof google=="object"&&typeof google.maps=="object"){c()}else{Themify.LoadAsync("//maps.google.com/maps/api/js?sensor=false&callback=do_maps&key="+themify_vars.map_key,function(){c()},true,true)}}f(window).load(a);f("body").on("builder_load_module_partial",a);f("body").on("builder_toggle_frontend",a);f("body").on("tf_tabs_switch",function(k,g,j){if(f(g).find(".module-maps-pro").length>0){f(g).find(".module-maps-pro").each(function(){var m=f(this).find(".map-container").data("gmap_object"),l=m.getCenter();google.maps.event.trigger(m,"resize");m.setCenter(l)})}})})(jQuery);