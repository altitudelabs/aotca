!function(a){"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],a):"object"==typeof exports?a(require("jquery"),require("load-image")):a(window.jQuery,window.loadImage)}(function(b,a){b.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:10000000,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(c,d){if(d.disabled){return c}var g=this,e=c.files[c.index],f=b.Deferred();return"number"===b.type(d.maxFileSize)&&e.size>d.maxFileSize||d.fileTypes&&!d.fileTypes.test(e.type)||!a(e,function(h){h.src&&(c.img=h),f.resolveWith(g,[c])},d)?c:f.promise()},resizeImage:function(c,e){if(e.disabled||!c.canvas&&!c.img){return c}e=b.extend({canvas:!0},e);var j,f=this,g=b.Deferred(),i=e.canvas&&c.canvas||c.img,h=function(d){d&&(d.width!==i.width||d.height!==i.height||e.forceResize)&&(c[d.getContext?"canvas":"img"]=d),c.preview=d,g.resolveWith(f,[c])};if(c.exif){if(e.orientation===!0&&(e.orientation=c.exif.get("Orientation")),e.thumbnail&&(j=c.exif.get("Thumbnail"))){return a(j,h,e),g.promise()}c.orientation?delete e.orientation:c.orientation=e.orientation}return i?(h(a.scale(i,e)),g.promise()):c},saveImage:function(e,c){if(!e.canvas||c.disabled){return e}var d=this,g=e.files[e.index],f=b.Deferred();return e.canvas.toBlob?(e.canvas.toBlob(function(h){h.name||(g.type===h.type?h.name=g.name:g.name&&(h.name=g.name.replace(/\.\w+$/,"."+h.type.substr(6)))),g.type!==h.type&&delete e.imageHead,e.files[e.index]=h,f.resolveWith(d,[e])},c.type||g.type,c.quality),f.promise()):e},loadImageMetaData:function(c,d){if(d.disabled){return c}var f=this,e=b.Deferred();return a.parseMetaData(c.files[c.index],function(g){b.extend(c,g),e.resolveWith(f,[c])},d),e.promise()},saveImageMetaData:function(g,f){if(!(g.imageHead&&g.canvas&&g.canvas.toBlob)||f.disabled){return g}var c=g.files[g.index],d=new Blob([g.imageHead,this._blobSlice.call(c,20)],{type:c.type});return d.name=c.name,g.files[g.index]=d,g},setImage:function(d,c){return d.preview&&!c.disabled&&(d.files[d.index][c.name||"preview"]=d.preview),d},deleteImageReferences:function(d,c){return c.disabled||(delete d.img,delete d.canvas,delete d.preview,delete d.imageHead),d}}})});